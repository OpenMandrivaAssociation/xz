--- xz-5.1.3alpha/src/liblzma/lzma/lzma_encoder_presets.c.0000	2013-10-26 13:27:12.000000000 +0300
+++ xz-5.1.3alpha/src/liblzma/lzma/lzma_encoder_presets.c	2014-03-14 11:27:58.951601422 +0200
@@ -18,7 +18,7 @@
 {
 	const uint32_t level = preset & LZMA_PRESET_LEVEL_MASK;
 	const uint32_t flags = preset & ~LZMA_PRESET_LEVEL_MASK;
-	const uint32_t supported_flags = LZMA_PRESET_EXTREME;
+	const uint32_t supported_flags = LZMA_PRESET_EXTREME | LZMA_PRESET_TEXT;
 
 	if (level > 9 || (flags & ~supported_flags))
 		return true;
@@ -57,5 +57,18 @@
 		}
 	}
 
+	if (flags & LZMA_PRESET_TEXT) {
+		if (level == 0)
+			options->lc = 3;
+		else
+			options->lc = 4;
+		options->lp = 0;
+		options->pb = 0;
+		options->mode = LZMA_MODE_NORMAL;
+		options->nice_len = 273;
+		options->mf = LZMA_MF_BT4;
+		options->depth = 512;
+	}
+
 	return false;
 }
--- xz-5.1.3alpha/src/liblzma/api/lzma/container.h.0000	2013-10-26 13:27:12.000000000 +0300
+++ xz-5.1.3alpha/src/liblzma/api/lzma/container.h	2014-03-14 11:27:58.950601435 +0200
@@ -43,7 +43,7 @@
 /*
  * Preset flags
  *
- * Currently only one flag is defined.
+ * Currently only two flags are defined.
  */
 
 /**
@@ -59,6 +59,12 @@
  */
 #define LZMA_PRESET_EXTREME       (UINT32_C(1) << 31)
 
+/**
+ * \brief       Text compression preset
+ *
+ * TODO
+ */
+#define LZMA_PRESET_TEXT          (UINT32_C(1) << 18)
 
 #ifdef LZMA_UNSTABLE /* Unstable API that may change. Use only for testing. */
 /**
--- xz-5.1.3alpha/src/xz/coder.h.0000	2013-10-26 13:27:12.000000000 +0300
+++ xz-5.1.3alpha/src/xz/coder.h	2014-03-14 11:27:58.951601422 +0200
@@ -61,6 +61,9 @@
 /// Enable extreme mode
 extern void coder_set_extreme(void);
 
+/// Enable text mode
+extern void coder_set_text(void);
+
 /// Add a filter to the custom filter chain
 extern void coder_add_filter(lzma_vli id, void *options);
 
--- xz-5.1.3alpha/src/xz/coder.c.0000	2013-10-26 13:27:12.000000000 +0300
+++ xz-5.1.3alpha/src/xz/coder.c	2014-03-14 11:38:50.762895482 +0200
@@ -104,6 +104,15 @@
 
 
 extern void
+coder_set_text(void)
+{
+	preset_number |= LZMA_PRESET_TEXT;
+	forget_filter_chain();
+	return;
+}
+
+
+extern void
 coder_add_filter(lzma_vli id, void *options)
 {
 	if (filters_count == LZMA_FILTERS_MAX)
--- xz-5.1.4beta/src/xz/args.c.0000	2013-10-26 13:27:12.000000000 +0300
+++ xz-5.1.4beta/src/xz/args.c	2014-03-14 11:31:53.813474540 +0200
@@ -141,6 +141,7 @@
 		OPT_ROBOT,
 		OPT_FLUSH_TIMEOUT,
 		OPT_IGNORE_CHECK,
+		OPT_TEXT,
 	};
 
 	static const char short_opts[]
@@ -182,6 +183,8 @@
 		{ "extreme",      no_argument,       NULL,  'e' },
 		{ "fast",         no_argument,       NULL,  '0' },
 		{ "best",         no_argument,       NULL,  '9' },
+		{ "text",         no_argument,       NULL,  OPT_TEXT },
+
 
 		// Filters
 		{ "lzma1",        optional_argument, NULL,  OPT_LZMA1 },
@@ -490,6 +493,10 @@
 					optarg, 0, UINT64_MAX);
 			break;
 
+		case OPT_TEXT:
+			coder_set_text();
+			break;
+
 		default:
 			message_try_help();
 			tuklib_exit(E_ERROR, E_ERROR, false);
